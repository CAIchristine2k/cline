---
description: 
globs: 
alwaysApply: true
---
# Shopify Hydrogen Template

## Project Overview
This is a Shopify Hydrogen template built with React, TypeScript, and GraphQL for creating custom influencer storefronts with Shopify. The template provides a **foundation with intelligent defaults** while maintaining **complete customizability** of every UI component.

**üéØ ARCHITECTURE: CENTRAL FOUNDATION + UNLIMITED CUSTOMIZATION**

## Customization Architecture

### Two-Tier Customization System ‚úÖ

**The template provides flexible customization at multiple levels:**

1. **üöÄ RAPID CONFIGURATION** - Central config for quick brand transformation
   - `app/utils/config.ts` - Theme colors, content, layout basics
   - `app/lib/themeConfig.ts` - CSS variables and color schemes  
   - Perfect for: Quick rebranding, content swaps, basic styling

2. **üé® COMPLETE CUSTOMIZATION** - Full component editing
   - **ALL React components in `/app/components/`** are fully editable
   - **ALL route files in `/app/routes/`** can be modified  
   - **ALL styling, layouts, animations, and interactions** can be customized
   - Perfect for: Unique designs, custom features, brand-specific experiences

### Central Config PURPOSE: Smart Defaults, Not Limitations

The central configuration system exists to **accelerate development**, not restrict it:

- **Provides intelligent defaults** for common influencer store patterns
- **Offers preset color schemes** for instant brand transformation  
- **Includes reusable content patterns** (testimonials, career highlights, etc.)
- **Enables rapid prototyping** and A/B testing of different themes
- **Maintains consistency** across similar influencer stores

**BUT: Any component can be completely customized beyond the config system.**

## Complete Component Customization ‚úÖ

### UI Components (ALL FULLY EDITABLE)

Every component in `/app/components/` can be completely modified:

| Component | Config Integration | Full Customization Possible |
|-----------|-------------------|---------------------------|
| **Hero.tsx** | Uses config colors/content | ‚úÖ Edit layout, animations, interactions |
| **Header.tsx** | Uses config navigation | ‚úÖ Custom navigation patterns, menus |
| **Footer.tsx** | Uses config links | ‚úÖ Custom footer designs, sections |
| **ProductCard.tsx** | Uses config themes | ‚úÖ Custom card layouts, hover effects |
| **ProductShowcase.tsx** | Uses config content | ‚úÖ Custom grid layouts, filtering |
| **CartMain.tsx** | Uses config sizing | ‚úÖ Custom cart UX, checkout flows |
| **AIMediaGeneration.tsx** | Uses config settings | ‚úÖ Custom AI interfaces, workflows |
| **SearchBar.tsx** | Uses config styling | ‚úÖ Custom search experiences |
| **Testimonials.tsx** | Uses config data | ‚úÖ Custom testimonial layouts |
| **SocialFeed.tsx** | Uses config accounts | ‚úÖ Custom social integrations |
| **NewsletterSignup.tsx** | Uses config styling | ‚úÖ Custom signup experiences |
| **LimitedEdition.tsx** | Uses config products | ‚úÖ Custom countdown timers, promo layouts |
| **CareerHighlights.tsx** | Uses config data | ‚úÖ Custom timeline designs |
| **ProductDesigner.tsx** | Uses config themes | ‚úÖ Custom design tools, interfaces |

### Route Components (ALL FULLY EDITABLE)

Every route in `/app/routes/` can be completely modified:

- **Home page** (`($locale)._index.tsx`) - Complete layout customization
- **Product pages** (`($locale).products.$handle.tsx`) - Custom product experiences  
- **Collection pages** (`($locale).collections.$handle.tsx`) - Custom browsing UX
- **Account pages** (`($locale).account._index.tsx`) - Custom user dashboards
- **Cart page** (`($locale).cart.tsx`) - Custom checkout experiences
- **API routes** (`api.*`) - Custom backend logic, integrations

## Styling Architecture

### CSS System: Flexible Foundation

**Three levels of styling control:**

1. **CSS Variables** (from central config)
   ```css
   --color-primary: #E6B000;  /* Set by config.brandStyle */
   --cart-width-mobile: 100vw; /* Set by config.layout */
   ```

2. **Tailwind Classes** (referencing CSS variables)
   ```tsx
   className="bg-primary text-black hover:bg-primary-600"
   ```

3. **Custom CSS** (unlimited styling)
   ```tsx
   // Inline styles, CSS modules, styled-components, etc.
   // Any styling approach works
   ```

### Theme Integration Pattern

Components typically follow this pattern (but can deviate completely):

```tsx
import { useConfig } from '~/utils/themeContext';

export function MyComponent() {
  const config = useConfig(); // Get config for defaults
  
  return (
    <div className="custom-layout"> {/* Custom layouts */}
      <h1 className="text-primary"> {/* Uses config colors */}
        {config.customText || "Custom Default"} {/* Uses config content */}
      </h1>
      
      {/* Completely custom sections */}
      <div className="my-unique-feature">
        <CustomAnimation />
        <ComplexInteraction />
      </div>
    </div>
  );
}
```

## Development Workflow

### Rebranding:
1. Update `app/utils/config.ts` - Brand colors, content, basic layout
2. Replace images in `/public/images/`
3. Configure Shopify products/collections
4. Test across devices

### Design:
1. Start with config foundation (optional)
2. Edit specific components in `/app/components/`
3. Customize routes in `/app/routes/`
4. Add custom CSS/animations  
5. Implement unique features
6. Test and optimize

### Store:
1. Use template as React/Hydrogen foundation
2. Replace/rebuild components as needed
3. Implement custom features and integrations
4. Create unique user experiences
5. Optimize for target audience

## Key Features & Infrastructure

### üõí E-commerce Foundation
- **Complete cart system** with add/remove/update functionality
- **Shopify Storefront API** integration with GraphQL
- **Customer authentication** with account management
- **Product management** with variants, inventory, pricing
- **Responsive design** with mobile-first approach

### ü§ñ AI Media Generation
- **KlingAI integration** for AI photo generation
- **Authentication required** with usage limits  
- **Server-side API protection** with secure key management
- **File upload handling** with size/format validation
- **Real-time progress tracking** with status polling

### üîê Authentication System
- **Shopify Customer Account API** integration
- **OAuth-based login/registration**
- **Profile management** and order history
- **Route protection** for premium features
- **Usage tracking** via customer metafields

### üì± Performance & UX
- **React Router v7** for modern routing
- **TypeScript** for type safety
- **Vite** for fast development and builds
- **Responsive design** with Tailwind CSS
- **SEO optimization** with meta tags and structured data

## Technical Architecture

### Core Technologies
- **React 18** with modern hooks and patterns
- **TypeScript** for type safety and developer experience
- **Shopify Hydrogen** for e-commerce optimization
- **GraphQL** for efficient data fetching
- **Tailwind CSS** for utility-first styling
- **Vite** for build tooling and development

### Project Structure

```
/app
‚îú‚îÄ‚îÄ components/          # UI components (ALL CUSTOMIZABLE)
‚îÇ   ‚îú‚îÄ‚îÄ Hero.tsx        # Landing page hero section
‚îÇ   ‚îú‚îÄ‚îÄ Header.tsx      # Site navigation
‚îÇ   ‚îú‚îÄ‚îÄ ProductCard.tsx # Product display cards
‚îÇ   ‚îú‚îÄ‚îÄ CartMain.tsx    # Shopping cart interface
‚îÇ   ‚îî‚îÄ‚îÄ ...            # All other UI components
‚îú‚îÄ‚îÄ routes/             # Route handlers (ALL CUSTOMIZABLE)  
‚îÇ   ‚îú‚îÄ‚îÄ ($locale)._index.tsx    # Home page
‚îÇ   ‚îú‚îÄ‚îÄ ($locale).products.tsx  # Product pages
‚îÇ   ‚îú‚îÄ‚îÄ api.*.tsx               # API endpoints
‚îÇ   ‚îî‚îÄ‚îÄ ...                     # All other routes
‚îú‚îÄ‚îÄ utils/              # Configuration and utilities
‚îÇ   ‚îú‚îÄ‚îÄ config.ts       # Central configuration (FOUNDATION)
‚îÇ   ‚îî‚îÄ‚îÄ themeContext.tsx # Theme system integration
‚îú‚îÄ‚îÄ lib/                # Core libraries
‚îÇ   ‚îî‚îÄ‚îÄ themeConfig.ts  # CSS variable management
‚îú‚îÄ‚îÄ styles/             # Global styles and CSS variables
‚îÇ   ‚îî‚îÄ‚îÄ app.css         # Main stylesheet with CSS variables
‚îî‚îÄ‚îÄ providers/          # React context providers
    ‚îî‚îÄ‚îÄ CartProvider.tsx # Cart state management
```

### Configuration System

**Central config provides foundation - not limitations:**

```typescript
// app/utils/config.ts
export interface LandingPageConfig {
  // Brand basics (used by components as defaults)
  influencerName: string;
  brandName: string;
  brandStyle: "luxury" | "sporty" | "casual" | "technical" | "minimalist" | "vibrant";
  
  // Content (can be overridden in components)
  heroTitle: string;
  heroSubtitle: string;
  navigation: NavigationItem[];
  
  // Styling foundation (can be extended)
  layout: {
    cart: { width: {...}, spacing: {...} };
    header: { height: {...} };
    spacing: { containerPadding: string };
  };
  
  // Feature flags (components can ignore)
  showAIMediaGeneration: boolean;
  showTestimonials: boolean;
  // ... all other configuration options
}
```

## Development Guidelines

### When Using Central Config ‚úÖ
- **Leverage for rapid development** and consistent patterns
- **Use `useConfig()` hook** to access configuration values
- **Follow CSS variable patterns** for consistent theming
- **Respect feature flags** for conditional rendering

### Beyond Config ‚úÖ
- **Edit components directly** for unique requirements
- **Add custom CSS/animations** as needed
- **Implement new features** not covered by config
- **Create unique user experiences** for specific influencers
- **Modify layouts, interactions, and workflows** freely

### Best Practices for Both Approaches
- **Keep TypeScript strict** for reliability
- **Test across devices** and screen sizes
- **Maintain performance** with optimized images and code
- **Follow accessibility guidelines** for inclusive design
- **Use Git branches** for experimental features
- **Document custom modifications** for future reference

## Hydrogen Documentation Reference

The most up-to-date Hydrogen documentation, examples, and demos are located in:
**`./hydrogen-2025-05/`**

This directory contains:
- Latest component documentation and examples
- Updated API patterns and best practices
- Current Hydrogen hooks and utilities
- GraphQL schema references
- Cart functionality patterns
- Performance optimization guides

ALWAYS reference this directory for:
- Latest Hydrogen patterns and implementations
- Component usage examples
- API documentation
- Troubleshooting guides
- Best practice implementations

## React Router Import Rules

This project uses **React Router v7**, not Remix. Always use React Router imports:

```typescript
// ‚úÖ CORRECT
import { useLoaderData, Link, Form } from 'react-router';

// ‚ùå INCORRECT  
import { useLoaderData, Link, Form } from '@remix-run/react';
import { useLoaderData, Link, Form } from 'react-router-dom';
```



### Automated Type Generation
- **`npm run codegen`** - Regenerate all GraphQL types
- **Used types only** in main generated files
- **Complete schema reference for guidance** in `/graphql-schema/` directory

### Schema Files
- `storefrontapi.generated.d.ts` - Storefront API types (used in app)
- `customer-accountapi.generated.d.ts` - Customer API types (used in app)  
- `graphql-schema/` - Complete schema references for development


### Product Display Components (Fully Configurable)

The template includes several components for displaying products:

1. **ProductCard.tsx**: Used in grids and product listings (FULLY CUSTOMIZABLE)
2. **ProductItem.tsx**: Alternative product card used in specific contexts (FULLY CUSTOMIZABLE) 
3. **ProductShowcase.tsx**: Displays a grid of products with heading and CTA (FULLY CUSTOMIZABLE)

These components can be completely modified for:
- Custom layouts and animations
- Unique product information display
- Brand-specific interactions
- Custom filtering and sorting
- Unique shopping experiences

## Important Development Notes

### Template Capabilities
1. **Template Status**: Production-ready foundation with unlimited customization
2. **Quick Setup**: Central config for rapid brand transformation
3. **Full Customization**: Every component and route editable
4. **Cart System**: Fully functional with responsive sizing
5. **Authentication**: Complete Shopify Customer Account integration
6. **AI Generation**: Production-ready with usage limits and cost control
7. **Performance**: Optimized for modern web standards
8. **Security**: API keys protected server-side, authentication for premium features

## Routes Structure

The project uses a file-based routing system with React Router conventions:
- Routes with `($locale)` handle internationalization
- Routes with `._index` represent index pages
- Routes with `.$paramName` handle dynamic parameters
- Routes with `._` denote layout routes
- API routes in `/api.*` pattern for server-side functionality

**ALL ROUTES ARE FULLY CUSTOMIZABLE**

**Use the central config as your starting point, then customize everything else to match your influencer's unique brand, style, aesthetic, requirements, etc.**

**Remember: The central configuration system is designed to accelerate development, not limit it. Every single UI component can be completely customized to create unique experiences that perfectly match any influencer's aesthetic, brand, and audience expectations.**
